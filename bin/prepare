#!/bin/bash
# -*- mode: bash; tab-width: 2; -*-
# vim: ts=2 sw=2 ft=bash noet

# source the Nos framework
. /opt/nos/common.sh

# initialize Nos with the original arguments
nos_init "$@"

# source common lib
. ${engine_lib_dir}/nodejs.sh

# install node.js or io.js
install_runtime

# install build runtimes
install_build_dependencies

# disable progress bar for faster npm tasks
npm_disable_progress

# add node_modules/.bin to the PATH
persist_npm_bin_to_path

# set the node.js runtime in cache
persist_runtime

exit 0
